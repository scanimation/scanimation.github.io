<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
    <title>Loading...</title>
    <link href="https://fonts.googleapis.com/css?family=Roboto&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>
<body ontouchstart="" id="wispy" style="display: none">

<div id="frames-loading-overlay" class="overlay">
    <div>
        <div class="overlay-header">
            <span class="overlay-title">Importing frames</span>
        </div>
        <div class="overlay-content">
            <div id="frames-loading-list">
                <div class="row">
                    <i class="loading material-icons">hourglass_full</i>
                    <i class="success material-icons">check_circle</i>
                    <i class="failure material-icons">error</i>
                    <div class="name-wrapper"><span class="name">frame-001-with-very-long-name.png</span></div>
                    <div class="break"></div>
                    <span class="failure description">code-0001: failed to import frame as a texture</span>
                </div>
            </div>
        </div>
        <div class="overlay-controls">
            <button class="overlay-close"><span>CLOSE</span></button>
        </div>
    </div>
</div>

<div id="frames-clear-overlay" class="overlay overlay-close">
    <div>
        <div class="overlay-header">
            <span class="overlay-title">Clear all frames?</span>
            <button class="overlay-close"><i class="material-icons">close</i></button>
        </div>
        <div class="overlay-content"><p>Deleting all animation frames will allow you to upload a different animation sequence.</p></div>
        <div class="overlay-controls">
            <button class="overlay-close"><span>CANCEL</span></button>
            <button id="frames-clear-yes"><span>CLEAR</span></button>
        </div>
    </div>
</div>

<div id="settings-reset-overlay" class="overlay overlay-close">
    <div>
        <div class="overlay-header">
            <span class="overlay-title">Reset settings to defaults?</span>
            <button class="overlay-close"><i class="material-icons">close</i></button>
        </div>
        <div class="overlay-content"><p>By resetting settings you will set all fields to values, recommended for A4 or US letter size paper.</p></div>
        <div class="overlay-controls">
            <button class="overlay-close"><span>CANCEL</span></button>
            <button id="settings-reset-yes"><span>RESET</span></button>
        </div>
    </div>
</div>

<div id="scanimation-errors-overlay" class="overlay overlay-close">
    <div>
        <div class="overlay-header">
            <span class="overlay-title">Failed to scanimate</span>
            <button class="overlay-close"><i class="material-icons">close</i></button>
        </div>
        <div class="overlay-content">
            <p id="scanimation-errors-code">Code: 0001</p>
            <p id="scanimation-errors-description">Reason: wrong image format</p>
        </div>
        <div class="overlay-controls">
            <button class="overlay-close"><span>CLOSE</span></button>
        </div>
    </div>
</div>

<div id="help-frames-overlay" class="overlay overlay-close help-overlay">
    <div>
        <div class="overlay-header">
            <span class="overlay-title">Help: Frames</span>
            <button class="overlay-close"><i class="material-icons">close</i></button>
        </div>
        <div class="overlay-content">
            <div class="help-v">
                <p>
                    To generate the scanimation, you need to import an animation.
                    <b>Frames</b> refer to separate images, where each represents a single frame of the animation.
                </p>
                <p>Here are the recommendations for the animation:</p>
                <p>1. Draw solid color silhouettes on white background</p>
                <div class="help-h">
                    <div class="help-image" style='background-image: url("/image/frames-1-b.png")'>
                        <p><i class="bad material-icons">close</i></p>
                    </div>
                    <div class="help-image" style='background-image: url("/image/frames-1-g.png")'>
                        <p><i class="good material-icons">done</i></p>
                    </div>
                </div>
                <p>2. Avoid small detail</p>
                <div class="help-h">
                    <div class="help-image" style='background-image: url("/image/frames-2-b.png")'>
                        <p><i class="bad material-icons">close</i></p>
                    </div>
                    <div class="help-image" style='background-image: url("/image/frames-2-g.png")'>
                        <p><i class="good material-icons">done</i></p>
                    </div>
                </div>
                <p>3. Use low number of frames: six or less</p>
                <div class="help-h">
                    <div class="help-image" style='background-image: url("/image/frames-3-b.gif")'>
                        <p>Frame count: <span class="bad">12</span></p>
                    </div>
                    <div class="help-image" style='background-image: url("/image/frames-34-g.gif")'>
                        <p>Frame count: <span class="good">6</span></p>
                    </div>
                </div>
                <p>4. Draw a looped animation</p>
                <div class="help-h">
                    <div class="help-image" style='background-image: url("/image/frames-4-b.gif")'>
                        <p><i class="bad material-icons">close</i></p>
                    </div>
                    <div class="help-image" style='background-image: url("/image/frames-34-g.gif")'>
                        <p><i class="good material-icons">done</i></p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="help-image-size-overlay" class="overlay overlay-close help-overlay">
    <div>
        <div class="overlay-header">
            <span class="overlay-title">Help: Image size</span>
            <button class="overlay-close"><i class="material-icons">close</i></button>
        </div>
        <div class="overlay-content">
            <div class="help-v">
                <p>
                    <b>Image size</b> is the pixel width and height of all of the frames.
                    Frame images must match in <b>size</b>, otherwise the app won’t be able to generate the scanimation.
                </p>
                <p>
                    It’s recommended to choose <b>image size</b> according to the further usage of the produced scanimation.
                    For printed scanimations, the 300 dpi images are recommended, which results in the next <b>image sizes</b> for most popular formats:
                </p>
                <div class="help-h">
                    <div class="help-image" style='background-image: url("/image/image-size-1.gif")'></div>
                    <div class="help-v">
                        <p class="description"><b>A4:</b> 3508 x 2480</p>
                        <p class="description"><b>US letter:</b> 3300 x 2550</p>
                        <p class="description"><span class="good">Compatible:</span> 3508 x 2550</p>
                    </div>
                </div>
                <div class="help-h">
                    <div class="help-image" style='background-image: url("/image/image-size-2.gif")'></div>
                    <div class="help-v">
                        <p class="description"><b>A5:</b> 2480 x 1748</p>
                        <p class="description"><b>US half letter:</b> 2550 x 1650</p>
                        <p class="description"><span class="good">Compatible:</span> 2550 x 1748</p>
                    </div>
                </div>
                <p>
                    The compatible sizes are useful, if you want to share your scanimations with the public,
                    and you are not sure which paper <b>size</b> is used in their country.
                </p>
            </div>
        </div>
    </div>
</div>

<div id="help-frame-count-overlay" class="overlay overlay-close help-overlay">
    <div>
        <div class="overlay-header">
            <span class="overlay-title">Help: Frame count</span>
            <button class="overlay-close"><i class="material-icons">close</i></button>
        </div>
        <div class="overlay-content">
            <div class="help-v">
                <p>
                    <b>Frame count</b> is the number of frames put into final scanimation.
                    It depends on the number of frames of underlying animation and number of overlapping frames (see: frame overlap).
                </p>
                <p>
                    It is recommended to use a low number of frames: six or less.
                </p>
                <p>
                    For each frame you add, the less information is visible through the grid.
                    For example, with four frames, <span class="good">25%</span> of underlying animation is visible;
                    while for eight frames, only <span class="bad">12.5%</span> of information is visible.
                </p>
                <p>
                    So if you have less frames, you will get a better scanimation effect, but choppier animation.
                    And if you have more frames, you will get a worse scanimation effect, but smoother animation.
                    Four to six frames appears to be the best compromise.
                </p>
                <div class="help-h">
                    <div class="help-image" style='background-image: url("/image/frame-count-1.png")'>
                        <p>Frame count: 10</p>
                        <p>Visible area: <span class="bad">10%</span></p>
                    </div>
                    <div class="help-image" style='background-image: url("/image/frame-count-2.png")'>
                        <p>Frame count: 8</p>
                        <p>Visible area: <span class="bad">12.5%</span></p>
                    </div>
                </div>
                <div class="help-h">
                    <div class="help-image" style='background-image: url("/image/frame-count-3.png")'>
                        <p>Frame count: 6</p>
                        <p>Visible area: <span class="good">16.6%</span></p>
                    </div>
                    <div class="help-image" style='background-image: url("/image/frame-count-4.png")'>
                        <p>Frame count: 4</p>
                        <p>Visible area: <span class="good">25%</span></p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="help-direction-overlay" class="overlay overlay-close help-overlay">
    <div>
        <div class="overlay-header">
            <span class="overlay-title">Help: Direction</span>
            <button class="overlay-close"><i class="material-icons">close</i></button>
        </div>
        <div class="overlay-content">
            <div class="help-v">
                <p>
                    <b>Direction</b> defines where you drag the grid over the scanimation.
                </p>
                <p>
                    The left <b>direction</b> is recommended for scanimation cards and books, when the scanimation is placed on the right page. And vice versa: right <b>direction</b>, if placed on the left page.
                </p>
                <div class="help-h">
                    <div class="help-image" style='background-image: url("/image/direction-left.gif")'>
                        <p>Direction: Left</p>
                    </div>
                    <div class="help-image" style='background-image: url("/image/direction-right.gif")'>
                        <p>Direction: Right</p>
                    </div>
                </div>
                <div class="help-h">
                    <div class="help-image" style='background-image: url("/image/direction-up.gif")'>
                        <p>Direction: Up</p>
                    </div>
                    <div class="help-image" style='background-image: url("/image/direction-down.gif")'>
                        <p>Direction: Down</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="help-frame-width-overlay" class="overlay overlay-close help-overlay">
    <div>
        <div class="overlay-header">
            <span class="overlay-title">Help: Frame width</span>
            <button class="overlay-close"><i class="material-icons">close</i></button>
        </div>
        <div class="overlay-content">
            <div class="help-v">
                <p>
                    <b>Frame width</b> is the pixel width of each frame slice in the produced scanimation.
                    It is the same as the size of grid gaps in pixels.
                </p>
                <p>
                    Recommended <b>frame width</b> for A4 and US letter paper sizes is 9 px.
                </p>
                <div class="help-h">
                    <div class="help-image" style='background-image: url("/image/frame-width-1.png")'>
                        <p>Frame width: 1x</p>
                    </div>
                    <div class="help-image" style='background-image: url("/image/frame-width-2.png")'>
                        <p>Frame width: 2x</p>
                    </div>
                </div>
                <div class="help-h">
                    <div class="help-image" style='background-image: url("/image/frame-width-3.png")'>
                        <p>Frame width: 3x</p>
                    </div>
                    <div class="help-image" style='background-image: url("/image/frame-width-4.png")'>
                        <p>Frame width: 4x</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="help-overlap-overlay" class="overlay overlay-close help-overlay">
    <div>
        <div class="overlay-header">
            <span class="overlay-title">Help: Frame overlap</span>
            <button class="overlay-close"><i class="material-icons">close</i></button>
        </div>
        <div class="overlay-content">
            <div class="help-v">
                <p>
                    <b>Frame overlap</b> is the number of frames contained in a single scanimation frame.
                    If your underlying animation spans the whole width or height of the sheet,
                    then it is possible to stack two or more animations together.
                </p>
                <p>
                    For example, if you have an 18-frame animation of horse galloping from left to right,
                    you can stack three of them, producing a 6-frame animation of three horses galloping.
                    In this case the <b>frame overlap</b> is set to three.
                </p>
                <div class="help-h">
                    <div class="help-image" style='background-image: url("/image/overlap-1.gif")'>
                        <p>Frame overlap: 1</p>
                        <p>Frame count: <span class="bad">18</span></p>
                    </div>
                    <div class="help-image" style='background-image: url("/image/overlap-2.gif")'>
                        <p>Frame overlap: 3</p>
                        <p>Frame count: <span class="good">6</span></p>
                    </div>
                </div>
                <p>
                    This trick will allow you to produce very smooth scanimations while keeping the frame count low.
                </p>
            </div>
        </div>
    </div>
</div>

<div id="loading">
    <span>Loading...</span>
</div>

<div id="offscreen">
    <input id="frames-input" type="file" multiple accept="image/*"/>
</div>

<div id="content">
    <div id="main">
        <div id="preview-section" class="section">
            <div>
                <span>Preview</span>
            </div>
            <div id="preview-wrapper"></div>
        </div>
    </div>
    <div class="menu">
        <div id="frames-section" class="section">
            <div>
                <span>Frames</span>
                <div class="fill"></div>
                <button id="frames-help" class="help" title="Help: Frames">?</button>
            </div>
            <div id="frames-dropzone">
                <span>Drop images here...</span>
                <i class="material-icons">add_photo_alternate</i>
            </div>
            <div id="frames-list">
                <div class="row">
                    <span class="index">1</span>
                    <span class="name fill">frame-001.png</span>
                    <button class="up" title="Move frame up"><i class="material-icons">arrow_upward</i></button>
                    <button class="down" title="Move frame down"><i class="material-icons">arrow_downward</i></button>
                    <button class="remove" title="Remove frame"><i class="material-icons">close</i></button>
                </div>
            </div>
            <div id="frames-controls">
                <button id="frames-show" class="round stopped" title="Play animation in preview">
                    <i class="material-icons stopped">play_arrow</i>
                    <i class="material-icons playing">pause</i>
                </button>
                <button id="frames-clear" class="round" title="Remove all frames"><i class="material-icons">delete</i></button>
                <button id="frames-add" class="round primary" title="Add frame images"><i class="material-icons">add</i></button>
            </div>
        </div>
        <div id="settings-section" class="section">
            <div>
                <span>Settings</span>
                <button id="settings-reset" class="round" title="Restore settings default values"><i class="material-icons">settings_backup_restore</i></button>
            </div>
            <div class="settings-row">
                <span>Image size</span>
                <span id="settings-image-size">N/A</span>
                <div class="fill"></div>
                <button id="settings-image-size-help" class="help" title="Help: Image size">?</button>
            </div>
            <div class="settings-row">
                <span>Frame count</span>
                <span id="settings-frame-count">N/A</span>
                <div class="fill"></div>
                <button id="settings-frame-count-help" class="help" title="Help: Frame count">?</button>
            </div>
            <div class="settings-row">
                <span>Direction</span>
                <select id="settings-direction">
                    <option value="Left">Left</option>
                    <option value="Right">Right</option>
                    <option value="Up">Up</option>
                    <option value="Down">Down</option>
                </select>
                <div class="fill"></div>
                <button id="settings-direction-help" class="help" title="Help: Direction">?</button>
            </div>
            <div class="settings-row">
                <span>Frame width</span>
                <input id="settings-frame-width" type="text" value=""/>
                <span>px</span>
                <div class="fill"></div>
                <button id="settings-frame-width-help" class="help" title="Help: Frame width">?</button>
            </div>
            <div class="settings-row">
                <span>Frame overlap</span>
                <input id="settings-frame-overlap" type="text" value=""/>
                <span>frames</span>
                <div class="fill"></div>
                <button id="settings-frame-overlap-help" class="help" title="Help: Frame overlap">?</button>
            </div>
        </div>
        <button id="scanimate" class="primary" title="Calculate scanimation"><span>SCANIMATE</span></button>
        <button id="scanimating" class="primary" disabled title="Scanimating"><span>SCANIMATING...</span></button>
        <div id="results-section">
            <button id="scanimation-play" class="round stopped" title="Play scanimation in preview">
                <i class="material-icons stopped">play_arrow</i>
                <i class="material-icons playing">pause</i>
            </button>
            <button id="scanimation-reset" class="round" title="Reset scanimation"><i class="material-icons">delete</i></button>
            <button id="scanimation-grid" class="" title="Download scanimation grid"><i class="material-icons">texture</i><span>GRID</span></button>
            <button id="scanimation-image" class="primary" title="Download scanimation image"><i class="material-icons">image</i><span>IMAGE</span></button>
        </div>
    </div>
</div>

<div id="background"></div>

<script type="text/javascript" src="/lib/jquery-2.1.3.min.js"></script>
<script type="text/javascript" src="/lib/jQuery.FileDrop.min.js"></script>
<script type="text/javascript" src="/lib/pixi.min.js"></script>
<script type="text/javascript" src="/lib/URI.js"></script>
<script type="text/javascript" src="/lib/dropzone.js"></script>
<script type="text/javascript" src="/bundle.js"></script>
<script type="text/javascript" src="/temp.js"></script>
<script type="text/javascript" src="/scanimation.js"></script>
</body>
</html>